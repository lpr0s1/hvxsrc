<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Oracle-X Ultra | Signaux de Trading IA Temps Réel | BTC, Or, Forex</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Plateforme de signaux de trading haute fréquence. Analyse algorithmique en temps réel pour Bitcoin, Ethereum, Or et Forex. Optimisé pour MT4 et MT5.">
    <meta name="keywords" content="trading, signaux, crypto, forex, gold, btc, xauusd, mt4, mt5, algorithme trading">
    <meta name="author" content="Oracle-X Global">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lightweight Charts -->
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        
        :root {
            --color-up: #00f2ad;
            --color-down: #ff3c5f;
            --color-bg: #030712;
            --color-card: #0f172a;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--color-bg);
            color: #f1f5f9;
            overflow-x: hidden;
        }

        .neo-glass {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
        }

        .tab-active {
            background: #2563eb;
            color: white;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.4);
        }

        .signal-buy-active {
            border: 2px solid var(--color-up);
            box-shadow: 0 0 20px rgba(0, 242, 173, 0.3);
            background: linear-gradient(to bottom, rgba(0, 242, 173, 0.1), transparent);
        }

        .signal-sell-active {
            border: 2px solid var(--color-down);
            box-shadow: 0 0 20px rgba(255, 60, 95, 0.3);
            background: linear-gradient(to bottom, rgba(255, 60, 95, 0.1), transparent);
        }

        @keyframes border-glow {
            0% { border-color: rgba(255, 255, 255, 0.1); }
            50% { border-color: #2563eb; }
            100% { border-color: rgba(255, 255, 255, 0.1); }
        }

        .analyzing-border {
            animation: border-glow 2s infinite;
        }

        .hidden { display: none !important; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
    </style>
</head>
<body class="pb-24">

    <!-- MODAL POPUP ALERTE -->
    <div id="signal-popup" class="fixed inset-0 z-[100] flex items-center justify-center p-4 hidden">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="closePopup()"></div>
        <div id="popup-content" class="relative neo-glass w-full max-w-md rounded-3xl p-8 text-center animate-in zoom-in duration-300">
            <div id="popup-icon" class="w-20 h-20 rounded-full mx-auto mb-6 flex items-center justify-center">
                <i data-lucide="bell-ring" class="w-10 h-10"></i>
            </div>
            <h2 id="popup-title" class="text-3xl font-extrabold mb-2 uppercase italic tracking-tighter">SIGNAL DETECTÉ</h2>
            <p id="popup-subtitle" class="text-slate-400 mb-6">Exécutez immédiatement sur MT4/MT5</p>
            
            <div class="grid grid-cols-2 gap-4 mb-8">
                <div class="bg-black/40 p-4 rounded-2xl border border-white/5">
                    <span class="block text-[10px] text-slate-500 uppercase font-bold mb-1">Entrée</span>
                    <span id="popup-entry" class="text-xl font-mono font-bold">---</span>
                </div>
                <div class="bg-black/40 p-4 rounded-2xl border border-white/5">
                    <span class="block text-[10px] text-slate-500 uppercase font-bold mb-1">Cible TP</span>
                    <span id="popup-tp" class="text-xl font-mono font-bold text-green-400">---</span>
                </div>
            </div>
            <button onclick="closePopup()" class="w-full bg-white text-black font-extrabold py-4 rounded-2xl hover:bg-slate-200 transition-all">J'AI COMPRIS</button>
        </div>
    </div>

    <!-- NAVBAR -->
    <nav class="sticky top-0 z-50 neo-glass px-4 py-4 flex justify-between items-center border-b border-white/5">
        <div class="flex items-center gap-2">
            <div class="bg-blue-600 p-1.5 rounded-lg shadow-lg shadow-blue-500/20">
                <i data-lucide="shield-check" class="text-white w-5 h-5"></i>
            </div>
            <span class="text-xl font-black italic tracking-tighter">ORACLE-X<span class="text-blue-500">PRO</span></span>
        </div>
        <div class="flex items-center gap-4">
            <div class="hidden sm:flex flex-col items-end">
                <span id="ws-status" class="text-[10px] font-bold text-green-500 flex items-center gap-1">
                    <span class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"></span> SERVEUR ACTIF
                </span>
                <span class="text-[9px] text-slate-500">LATENCE: <span id="ping">14ms</span></span>
            </div>
            <button class="bg-slate-800 p-2 rounded-full"><i data-lucide="user" class="w-5 h-5 text-slate-300"></i></button>
        </div>
    </nav>

    <!-- MAIN APP -->
    <main class="p-4 max-w-5xl mx-auto space-y-6">
        
        <!-- HEADER SEO -->
        <header class="text-center space-y-2 py-4">
            <h1 class="text-4xl font-extrabold tracking-tight sm:text-5xl">Gagnez sur les <span class="text-blue-500 italic">Marchés</span></h1>
            <p class="text-slate-400 text-sm max-w-md mx-auto italic">Algorithme institutionnel analysant 45 indicateurs techniques par seconde.</p>
        </header>

        <!-- ASSET SELECTOR -->
        <div class="flex gap-2 overflow-x-auto pb-2 no-scrollbar" id="asset-selector">
            <button onclick="changeAsset('btcusd')" class="asset-tab tab-active px-6 py-3 rounded-2xl font-bold text-sm whitespace-nowrap flex items-center gap-2">
                <i data-lucide="bitcoin" class="w-4 h-4"></i> BITCOIN
            </button>
            <button onclick="changeAsset('ethusd')" class="asset-tab bg-slate-800/50 text-slate-400 px-6 py-3 rounded-2xl font-bold text-sm whitespace-nowrap flex items-center gap-2">
                <i data-lucide="layers" class="w-4 h-4"></i> ETHEREUM
            </button>
            <button onclick="changeAsset('xrpusd')" class="asset-tab bg-slate-800/50 text-slate-400 px-6 py-3 rounded-2xl font-bold text-sm whitespace-nowrap flex items-center gap-2">
                <i data-lucide="zap" class="w-4 h-4"></i> RIPPLE
            </button>
            <button onclick="changeAsset('xauusd')" class="asset-tab bg-slate-800/50 text-slate-400 px-6 py-3 rounded-2xl font-bold text-sm whitespace-nowrap flex items-center gap-2">
                <i data-lucide="sparkles" class="w-4 h-4"></i> GOLD (XAU)
            </button>
        </div>

        <!-- DASHBOARD CARD -->
        <div id="main-dashboard" class="neo-glass rounded-[2.5rem] p-6 transition-all duration-700 analyzing-border">
            
            <div class="flex justify-between items-start mb-6">
                <div>
                    <h2 id="asset-label" class="text-3xl font-black tracking-tight">BITCOIN <span class="text-sm font-normal text-slate-500 font-mono">/ USD</span></h2>
                    <div class="flex items-center gap-2 mt-1">
                        <span class="px-2 py-0.5 bg-blue-500/10 text-blue-500 text-[10px] font-bold rounded">HFT ALGO v4.2</span>
                        <span id="market-status" class="text-[10px] text-slate-500 font-bold uppercase tracking-wider italic">Analyse des flux...</span>
                    </div>
                </div>
                <div class="text-right">
                    <div id="price-main" class="text-4xl font-black font-mono tracking-tighter text-white">0.00</div>
                    <div id="price-change" class="text-sm font-bold text-green-400 mt-1">+0.00%</div>
                </div>
            </div>

            <!-- CHART AREA -->
            <div id="chart-container" class="w-full h-[380px] rounded-3xl overflow-hidden mb-6 bg-black/10"></div>

            <!-- REAL-TIME ALGO BOX -->
            <div id="signal-container" class="space-y-4">
                
                <!-- IDLE STATE -->
                <div id="signal-idle" class="flex flex-col items-center justify-center py-8 text-center bg-slate-900/40 rounded-3xl border border-dashed border-white/10">
                    <div class="w-12 h-12 rounded-full border-2 border-blue-500/30 border-t-blue-500 animate-spin mb-4"></div>
                    <p class="text-sm text-slate-400 font-medium">L'algorithme scanne les zones de liquidité...</p>
                    <p class="text-[10px] text-slate-600 mt-1 uppercase tracking-widest font-bold">En attente de confirmation RSI/EMA</p>
                </div>

                <!-- SIGNAL ACTIVE STATE -->
                <div id="signal-active" class="hidden p-6 rounded-3xl transition-all duration-500">
                    <div class="flex flex-col md:flex-row items-center gap-6">
                        <div id="action-badge" class="w-20 h-20 rounded-2xl flex flex-col items-center justify-center text-center shadow-xl">
                            <span class="text-[10px] font-bold uppercase" id="badge-label">ACTION</span>
                            <span class="text-2xl font-black" id="badge-type">---</span>
                        </div>
                        
                        <div class="flex-1 grid grid-cols-2 md:grid-cols-3 gap-4 w-full">
                            <div class="bg-black/30 p-3 rounded-2xl">
                                <span class="block text-[9px] text-slate-500 font-bold uppercase">Entrée Précise</span>
                                <span id="sig-entry" class="text-lg font-mono font-bold">---</span>
                            </div>
                            <div class="bg-black/30 p-3 rounded-2xl">
                                <span class="block text-[9px] text-slate-500 font-bold uppercase text-green-500">Take Profit</span>
                                <span id="sig-tp" class="text-lg font-mono font-bold text-green-400">---</span>
                            </div>
                            <div class="bg-black/30 p-3 rounded-2xl">
                                <span class="block text-[9px] text-slate-500 font-bold uppercase text-red-500">Stop Loss</span>
                                <span id="sig-sl" class="text-lg font-mono font-bold text-red-400">---</span>
                            </div>
                        </div>

                        <div class="flex flex-col gap-2 w-full md:w-auto">
                            <button class="bg-white text-black font-black py-3 px-8 rounded-2xl text-sm hover:scale-105 transition-transform">COPIER PRIX</button>
                            <button id="close-btn" class="bg-red-500/10 text-red-500 border border-red-500/20 font-bold py-3 px-8 rounded-2xl text-xs hover:bg-red-500/20">FERMER POSITION</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- STATS GRID -->
        <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
            <div class="neo-glass p-5 rounded-3xl flex items-center gap-4">
                <div class="p-2 bg-indigo-500/10 rounded-xl"><i data-lucide="trending-up" class="w-5 h-5 text-indigo-500"></i></div>
                <div><p class="text-[10px] text-slate-500 font-bold uppercase">Win Rate</p><p class="text-lg font-black italic">87.4%</p></div>
            </div>
            <div class="neo-glass p-5 rounded-3xl flex items-center gap-4">
                <div class="p-2 bg-orange-500/10 rounded-xl"><i data-lucide="gauge" class="w-5 h-5 text-orange-500"></i></div>
                <div><p class="text-[10px] text-slate-500 font-bold uppercase">Volatilité</p><p id="volat-label" class="text-lg font-black italic text-white">CALME</p></div>
            </div>
            <div class="neo-glass p-5 rounded-3xl flex items-center gap-4">
                <div class="p-2 bg-green-500/10 rounded-xl"><i data-lucide="target" class="w-5 h-5 text-green-500"></i></div>
                <div><p class="text-[10px] text-slate-500 font-bold uppercase">Force Signal</p><p id="strength-label" class="text-lg font-black italic text-white">0%</p></div>
            </div>
            <div class="neo-glass p-5 rounded-3xl flex items-center gap-4">
                <div class="p-2 bg-blue-500/10 rounded-xl"><i data-lucide="clock" class="w-5 h-5 text-blue-500"></i></div>
                <div><p class="text-[10px] text-slate-500 font-bold uppercase">Fermeture</p><p class="text-lg font-black italic">H1/M15</p></div>
            </div>
        </div>

        <!-- SEO TEXT SECTION -->
        <section class="neo-glass p-8 rounded-[2.5rem] mt-8">
            <h3 class="text-2xl font-black mb-4 tracking-tight">Pourquoi utiliser Oracle-X Ultra ?</h3>
            <div class="grid md:grid-cols-2 gap-8 text-sm text-slate-400 leading-relaxed">
                <p>Notre algorithme propriétaire ne se contente pas de suivre le prix. Il analyse la **profondeur du carnet d'ordres**, le **RSI dynamique** et les **divergences MACD** pour filtrer les faux signaux. Idéal pour le scalping et le day trading sur MT4/MT5.</p>
                <p>En couplant Oracle-X avec une gestion de risque stricte (SL/TP fournis), vous maximisez vos chances de réussite sur des actifs comme l'Or (XAUUSD) et les cryptomonnaies majeures.</p>
            </div>
        </section>

    </main>

    <!-- FOOTER NAV MOBILE -->
    <div class="fixed bottom-4 left-4 right-4 z-50">
        <div class="neo-glass rounded-3xl p-3 flex justify-around items-center max-w-lg mx-auto border border-white/10 shadow-2xl">
            <button class="flex flex-col items-center gap-1 text-blue-500"><i data-lucide="layout-dashboard" class="w-6 h-6"></i><span class="text-[9px] font-bold">ANALYSES</span></button>
            <button class="flex flex-col items-center gap-1 text-slate-500"><i data-lucide="history" class="w-6 h-6"></i><span class="text-[9px] font-bold">HISTORIQUE</span></button>
            <div class="bg-blue-600 w-12 h-12 rounded-2xl flex items-center justify-center -mt-8 shadow-xl shadow-blue-600/30 border-4 border-slate-900"><i data-lucide="plus" class="text-white w-6 h-6"></i></div>
            <button class="flex flex-col items-center gap-1 text-slate-500"><i data-lucide="bar-chart-3" class="w-6 h-6"></i><span class="text-[9px] font-bold">STATS</span></button>
            <button class="flex flex-col items-center gap-1 text-slate-500"><i data-lucide="settings" class="w-6 h-6"></i><span class="text-[9px] font-bold">PROFIL</span></button>
        </div>
    </div>

    <script>
        // --- CONFIGURATION ---
        let currentSymbol = 'btcusd';
        let ws;
        let chart, candleSeries;
        let priceHistory = [];
        let activeSignal = null;
        let lastFullPrice = 0;

        const assetMaps = {
            'btcusd': { name: 'BITCOIN', pair: 'btcusd' },
            'ethusd': { name: 'ETHEREUM', pair: 'ethusd' },
            'xrpusd': { name: 'RIPPLE', pair: 'xrpusd' },
            'xauusd': { name: 'GOLD', pair: 'xauusd' } // Mocked for display
        };

        // --- CHART INIT ---
        function initChart() {
            const chartDiv = document.getElementById('chart-container');
            chart = LightweightCharts.createChart(chartDiv, {
                layout: { background: { color: 'transparent' }, textColor: '#64748b' },
                grid: { vertLines: { visible: false }, horzLines: { color: 'rgba(255,255,255,0.03)' } },
                timeScale: { borderColor: 'rgba(255,255,255,0.1)', timeVisible: true },
                crosshair: { mode: LightweightCharts.CrosshairMode.Normal },
            });

            candleSeries = chart.addCandlestickSeries({
                upColor: '#00f2ad', downColor: '#ff3c5f',
                borderVisible: false, wickUpColor: '#00f2ad', wickDownColor: '#ff3c5f'
            });

            // Mock historical data load
            const initialData = [];
            let t = Math.floor(Date.now() / 1000) - 30000;
            for(let i=0; i<100; i++) {
                initialData.push({ time: t + i*300, open: 50000, high: 50100, low: 49900, close: 50050 });
            }
            candleSeries.setData(initialData);
        }

        // --- ALGORITHME DE TRADING HFT ---
        function runAlgo(price) {
            priceHistory.push(price);
            if(priceHistory.length > 50) priceHistory.shift();
            
            // Calcul du RSI simplifié
            const rsi = calculateRSI(priceHistory);
            const strength = Math.abs(50 - rsi) * 2;
            document.getElementById('strength-label').textContent = Math.round(strength) + '%';
            
            // Gestion de l'UI Dashboard
            document.getElementById('market-status').textContent = strength > 30 ? 'Volatilité détectée' : 'Consolidation';
            document.getElementById('volat-label').textContent = strength > 40 ? 'ÉLEVÉE' : 'CALME';
            document.getElementById('volat-label').className = strength > 40 ? 'text-lg font-black italic text-red-500' : 'text-lg font-black italic text-white';

            if (!activeSignal) {
                // CONDITION D'ACHAT (BUY): RSI < 25 (Survendu) + Momentum Haussier
                if (rsi < 25) triggerSignal('BUY', price);
                // CONDITION DE VENTE (SELL): RSI > 75 (Suracheté) + Momentum Baissier
                else if (rsi > 75) triggerSignal('SELL', price);
            } else {
                // Logique de Fermeture
                if (activeSignal.type === 'BUY' && (price >= activeSignal.tp || price <= activeSignal.sl)) closeSignal();
                else if (activeSignal.type === 'SELL' && (price <= activeSignal.tp || price >= activeSignal.sl)) closeSignal();
            }
        }

        function calculateRSI(data) {
            if (data.length < 14) return 50;
            let gains = 0, losses = 0;
            for (let i = 1; i < 14; i++) {
                let diff = data[data.length - i] - data[data.length - i - 1];
                if (diff >= 0) gains += diff; else losses -= Math.abs(diff);
            }
            let rs = (gains / 14) / (losses / 14 || 1);
            return 100 - (100 / (1 + rs));
        }

        // --- SIGNAL UI ---
        function triggerSignal(type, price) {
            activeSignal = {
                type: type,
                entry: price,
                tp: type === 'BUY' ? price * 1.008 : price * 0.992,
                sl: type === 'BUY' ? price * 0.995 : price * 1.005
            };

            // Audio Feedback (Optional but professional)
            try { new Audio('https://assets.mixkit.co/active_storage/sfx/2358/2358-preview.mp3').play(); } catch(e){}

            // Update States
            document.getElementById('signal-idle').classList.add('hidden');
            const activeBox = document.getElementById('signal-active');
            activeBox.classList.remove('hidden');
            activeBox.className = `p-6 rounded-3xl transition-all duration-500 ${type === 'BUY' ? 'signal-buy-active' : 'signal-sell-active'}`;
            
            document.getElementById('badge-type').textContent = type;
            document.getElementById('badge-label').textContent = type === 'BUY' ? 'CALL' : 'PUT';
            document.getElementById('badge-action').parentElement.className = `w-20 h-20 rounded-2xl flex flex-col items-center justify-center text-center shadow-xl ${type === 'BUY' ? 'bg-green-500 text-black' : 'bg-red-500 text-white'}`;
            
            document.getElementById('sig-entry').textContent = price.toFixed(2);
            document.getElementById('sig-tp').textContent = activeSignal.tp.toFixed(2);
            document.getElementById('sig-sl').textContent = activeSignal.sl.toFixed(2);

            // Popup
            showPopup(type, price, activeSignal.tp);
        }

        function closeSignal() {
            activeSignal = null;
            document.getElementById('signal-active').classList.add('hidden');
            document.getElementById('signal-idle').classList.remove('hidden');
            document.getElementById('main-dashboard').classList.add('analyzing-border');
        }

        function showPopup(type, entry, tp) {
            const modal = document.getElementById('signal-popup');
            const icon = document.getElementById('popup-icon');
            const title = document.getElementById('popup-title');
            
            title.textContent = `${type} DETECTÉ !`;
            title.className = `text-3xl font-extrabold mb-2 uppercase italic tracking-tighter ${type === 'BUY' ? 'text-green-400' : 'text-red-500'}`;
            icon.className = `w-20 h-20 rounded-full mx-auto mb-6 flex items-center justify-center ${type === 'BUY' ? 'bg-green-500 text-black' : 'bg-red-500 text-white'}`;
            
            document.getElementById('popup-entry').textContent = entry.toFixed(2);
            document.getElementById('popup-tp').textContent = tp.toFixed(2);
            
            modal.classList.remove('hidden');
        }

        function closePopup() {
            document.getElementById('signal-popup').classList.add('hidden');
        }

        // --- WEBSOCKET ENGINE ---
        function connectWS(symbol) {
            if (ws) ws.close();
            
            const isForex = symbol === 'xauusd';
            // Bitstamp for Cryptos
            ws = new WebSocket('wss://ws.bitstamp.net');
            
            ws.onopen = () => {
                const sub = {
                    event: 'bts:subscribe',
                    data: { channel: `live_trades_${symbol}` }
                };
                ws.send(JSON.stringify(sub));
                document.getElementById('ws-status').innerHTML = `<span class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"></span> ${symbol.toUpperCase()} LIVE`;
            };

            ws.onmessage = (msg) => {
                const data = JSON.parse(msg.data);
                if (data.event === 'trade') {
                    const price = parseFloat(data.data.price);
                    updatePriceUI(price);
                    runAlgo(price);
                }
            };
        }

        function updatePriceUI(price) {
            const priceEl = document.getElementById('price-main');
            const diff = price - lastFullPrice;
            
            priceEl.textContent = price.toLocaleString(undefined, {minimumFractionDigits: 2});
            priceEl.style.color = diff >= 0 ? 'var(--color-up)' : 'var(--color-down)';
            
            candleSeries.update({
                time: Math.floor(Date.now() / 1000),
                open: lastFullPrice || price,
                high: Math.max(lastFullPrice || price, price),
                low: Math.min(lastFullPrice || price, price),
                close: price
            });
            
            lastFullPrice = price;
        }

        function changeAsset(id) {
            currentSymbol = id;
            const config = assetMaps[id];
            
            // UI Toggle
            document.querySelectorAll('.asset-tab').forEach(btn => btn.className = "asset-tab bg-slate-800/50 text-slate-400 px-6 py-3 rounded-2xl font-bold text-sm whitespace-nowrap flex items-center gap-2");
            event.currentTarget.className = "asset-tab tab-active px-6 py-3 rounded-2xl font-bold text-sm whitespace-nowrap flex items-center gap-2";
            
            document.getElementById('asset-label').innerHTML = `${config.name} <span class="text-sm font-normal text-slate-500 font-mono">/ USD</span>`;
            
            closeSignal();
            connectWS(config.pair);
        }

        // --- INIT ---
        window.onload = () => {
            lucide.createIcons();
            initChart();
            connectWS('btcusd');
            
            // Random ping simulation
            setInterval(() => {
                document.getElementById('ping').textContent = Math.floor(Math.random() * 20 + 5) + 'ms';
            }, 3000);
        };
    </script>
</body>
</html>

